大学二年级时做的一个项目，原本打算做一个正逆运动学机械臂，后来加入了微型控制器。

本项目灵感来源于https://www.youtube.com/@buildsomestuff，是基于此机械臂机械结构进行的软件程序二次开发。


一、项目概述

本项目致力于打造一款桌面级四自由度紧凑型机械臂，凭借多控制器协同作业，实现物体的精准抓取与搬运。其设计兼顾低成本与高性能，预期开发成本低于 300 元。通过 Arduino 和 Python 之间的串口通信，实现机械臂的正逆运动学计算以及轨迹规划。Python 代码负责复杂的运动学计算和轨迹规划，而 Arduino 则作为微型控制器，接收来自 Python 的指令并控制机械臂的运动。

二、基本功能

1.正向运动学计算：根据机械臂的 DH 参数和关节角度，计算机械臂末端执行器的位姿。

2.逆运动学求解：通过数值优化方法，根据目标位姿求解对应的关节角度。

3.轨迹规划：支持用户输入起始点和目标点，自动生成运动轨迹，并考虑障碍物绕行。

4.串口通信：Python 和 Arduino 之间通过串口进行数据传输，实现指令发送和状态反馈。

5.通过四个微型控制器，将小模型的“动作”映射到大机械臂上上，实现“人机交互”。


三、安装与配置

1.硬件要求

（1）Arduino 开发板；
（2）机械臂3D打印件；
（3）MG996R舵机、20KG舵机、SG90舵机；
........
（具体物料可在物料清单里查看）

2.软件要求

（1）Python 3.x 与 arduino ide
（2)所需 Python 库：numpy, scipy, pyserial
    （安装依赖库pip install numpy scipy pyserial）


四、代码说明

1.arduino部分

（1）COM3_test代码文件与python部分的“串口测试”代码文件一起使用，用于验证串口通信是否正常(之所以取得COM3是因为最开始在我电脑上用的COM3，后面懒得改了hh）；

（2)Compact_Robot_Arm_Code代码文件是微型控制器的代码，是基于博主开源的代码修改后的，大家使用时需要根据自己电位器和实际情况调试更改映射值（可以用我的“单电位器调试”文件进行一个一个调试,建议调试好后再进行组装！！！；

（3）one_servo_test代码文件用于测试舵机；

（4）PwmDriver与PwmDriver2代码文件都是用于驱动所有舵机的程序，与python部分的“逆运动学”代码文件一起使用，进行串口通信，PwmDriver与PwmDriver2最主要的区别是2加入了平滑运动控制算法,主要原因是因为我们底盘不稳，也可以用其他办法解决；

（5）Trajectory planning代码文件是机械臂轨迹规划避障功能，需要与python部分的“Trajectory planning”代码文件一起使用，目前还不是很完美，但基本能实现；

2.python部分（这里就不像上面arduino部分一个一个讲代码文件了，讲一下核心代码功能）

（1）正向运动学工具函数

dh_matrix(theta, alpha, a, d)：根据改进的 DH 参数生成齐次变换矩阵。
fkine(dh_params, q)：根据 DH 参数和关节角度计算机械臂末端执行器的位姿。

（2）逆运动学核心算法

基于matlab机器人工具箱
ikunc(dh_params, T_target, q_guess, base_offset, tool_offset)：通过数值优化方法求解逆运动学问题。

（3）串口通信函数

wait_completion(ser, timeout)：等待 Arduino 发送运动完成的反馈信息。

3.Matlab仿真部分

通过matlab机器人工具箱构建机械臂进行仿真，生成工作空间点云图。

4.注意事项

确保 Arduino 和 Python 代码中的串口号和波特率一致。
在运行程序前，确保机械臂处于安全位置，避免发生碰撞。
若出现角度超限或运动执行失败的错误，请检查输入参数和机械臂的物理限制。


五、其他

本项目可开发性较高，后求考虑加入语音控制。
